TODO
====

 - Add tests
 - See FIXME in src/main.cpp and src/util/random.cpp
